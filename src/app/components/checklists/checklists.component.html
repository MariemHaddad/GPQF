<style>
  .checklist-container {
  padding: 20px;
  background-color: #f9f9f9;
  border-radius: 8px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}
.remarque-textarea {
  width: 100%;
  min-height: 100px; /* Hauteur minimale plus grande */
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 4px;
  resize: vertical; /* Autorise le redimensionnement vertical */
  box-sizing: border-box;
  font-size: 14px;
}

.remarque-textarea:focus {
  border-color: #66afe9;
  outline: none;
  box-shadow: 0 0 8px rgba(102, 175, 233, 0.6);
}

.checklist-title {
  text-align: center;
    color: #1183fcbd;
    font-weight: bold;
    margin-bottom: 20px;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 20px;
}

table th, table td {
  padding: 12px;
  border: 1px solid #ddd;
  text-align: left;
}

table th {
  background-color: #f2f2f2;
}

input[type="text"], select {
  width: 100%;
  padding: 8px;
  margin: 5px 0;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
}

input[type="text"]:focus, select:focus {
  border-color: #66afe9;
  outline: none;
  box-shadow: 0 0 8px rgba(102, 175, 233, 0.6);
}

.btn-modifier {
  background-color: #007bff;
  color: white;
  padding: 10px 20px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  margin-bottom: 20px;
}

.btn-modifier:hover {
  background-color: #0056b3;
}

.checklist-status p {
  margin: 10px 0;
  font-size: 16px;
}

select {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  background: #fff url('data:image/svg+xml;charset=US-ASCII,<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10"><polygon fill="gray" points="0,0 10,0 5,5"/></svg>') no-repeat right center;
  background-size: 10px 10px;
}
  </style> <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">
    <!-- Sidebar Toggle (Topbar) -->
    <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
        <i class="fa fa-bars"></i>
    </button>
    <div class="container custom-container d-flex justify-content-between align-items-center">
        <!-- Logo Telnet -->
        <div class="text-left">
            <img src="assets/img/Telnet.png" alt="Telnet Logo" style="width: 200px; height: auto;">
        </div>
        
        <!-- Lien Déconnexion -->
        <div>
          <a href="login" class="btn btn-link" style="color: #0a4380bd; text-decoration: none; margin-left: 800px;">Déconnexion</a> <!-- Ajout de margin-left -->
        </div>
    </div>
</nav>
<div class="checklist-container">
  <h2 class="checklist-title">Checklist de Revue de {{ phaseDescription }} du Projet {{ NomP }}</h2>
  
  <div *ngIf="isRQualite">
    <button type="button" class="btn-modifier" *ngIf="!isEditing" (click)="startEditing()">Modifier</button>
  </div>

  <table *ngIf="checklist">
    <thead>
      <tr>
        <th>Description</th>
        <th>Résultat</th>
        <th>Commentaire</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of checklist.items">
        <td>{{ item.description }}</td>
        <td>
          <!-- Select avec styles -->
          <ng-container *ngIf="isEditing; else readonlyResult">
            <select [(ngModel)]="item.resultat" class="resultat-select">
              <option *ngFor="let result of resultatItem" [value]="result">{{ result }}</option>
            </select>
          </ng-container>
          <ng-template #readonlyResult>{{ item.resultat }}</ng-template>
        </td>
        <td>
          <!-- Champ texte stylisé -->
          <ng-container *ngIf="isEditing; else readonlyComment">
            <input [(ngModel)]="item.commentaire" type="text" class="comment-input"/>
          </ng-container>
          <ng-template #readonlyComment>{{ item.commentaire }}</ng-template>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="checklist-status">
    <div *ngIf="isEditing">
      <p><strong>Statut:</strong> 
        <select [(ngModel)]="checklist.status">
          <option *ngFor="let option of statusOptions" [value]="option">{{ option }}</option>
        </select>
      </p>
      <p><strong>Remarque:</strong> 
        <textarea [(ngModel)]="checklist.remarque" class="remarque-textarea"></textarea>
      </p>
    </div>
    <div *ngIf="!isEditing">
      <p><strong>Statut:</strong> {{ checklist.status }}</p>
      <p><strong>Remarque:</strong> {{ checklist.remarque }}</p>
    </div>
  </div>
</div>
    <!-- Boutons Modifier et Enregistrer les modifications -->
    <!-- Votre bouton pour enregistrer les modifications -->
<div *ngIf="isRQualite">
  <button type="submit" class="btn btn-primary btn-user btn-block" *ngIf="isEditing" (click)="saveChecklist()">Enregistrer les modifications</button>
</div>

<div class="modal" [ngClass]="{'show': isCausalAnalysisModalOpen}" [ngStyle]="{'display': isCausalAnalysisModalOpen ? 'block' : 'none'}">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Analyse Causale Nécessaire</h5>
        <button type="button" class="close" aria-label="Close" (click)="closeCausalAnalysisModal()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Vous devez remplir une analyse causale pour définir la raison de refus de la checklist. Voulez-vous continuer ?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="closeCausalAnalysisModal()">Annuler</button>
        <button type="button" class="btn btn-primary" (click)="navigateToCausalAnalysis()">Continuer</button>
      </div>
    </div>
  </div>
  <div class="overlay" *ngIf="isCausalAnalysisModalOpen"></div>
</div>